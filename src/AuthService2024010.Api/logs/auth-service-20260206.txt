[2026-02-06 10:50:32 INF] Checking database connection... {"SourceContext":"Program"}
[2026-02-06 10:50:33 INF] Database ready. Running seed data... {"SourceContext":"Program"}
[2026-02-06 10:50:33 INF] Database initialization completed successfully {"SourceContext":"Program"}
[2026-02-06 10:50:33 INF] AuthService API is running at http://localhost:5013. Health endpoint: http://localhost:5013/health {"SourceContext":"Program"}
[2026-02-06 10:53:20 INF] Checking database connection... {"SourceContext":"Program"}
[2026-02-06 10:53:21 INF] Database ready. Running seed data... {"SourceContext":"Program"}
[2026-02-06 10:53:22 INF] Database initialization completed successfully {"SourceContext":"Program"}
[2026-02-06 10:53:22 INF] AuthService API is running at http://localhost:5013. Health endpoint: http://localhost:5013/health {"SourceContext":"Program"}
[2026-02-06 11:28:29 WRN] Failed to determine the https port for redirect. {"EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HNJ5KKIFER2A:00000001","RequestPath":"/api/v1/register","ConnectionId":"0HNJ5KKIFER2A"}
[2026-02-06 11:28:30 INF] HTTP POST /api/v1/register responded 404 in 155.7149 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ5KKIFER2A:00000001","ConnectionId":"0HNJ5KKIFER2A"}
[2026-02-06 11:31:11 INF] Checking database connection... {"SourceContext":"Program"}
[2026-02-06 11:31:13 INF] Database ready. Running seed data... {"SourceContext":"Program"}
[2026-02-06 11:31:13 INF] Database initialization completed successfully {"SourceContext":"Program"}
[2026-02-06 11:31:13 INF] AuthService API is running at http://localhost:5013. Health endpoint: http://localhost:5013/health {"SourceContext":"Program"}
[2026-02-06 11:34:02 INF] Checking database connection... {"SourceContext":"Program"}
[2026-02-06 11:34:03 INF] Database ready. Running seed data... {"SourceContext":"Program"}
[2026-02-06 11:34:03 INF] Database initialization completed successfully {"SourceContext":"Program"}
[2026-02-06 11:34:04 INF] AuthService API is running at http://localhost:5013. Health endpoint: http://localhost:5013/health {"SourceContext":"Program"}
[2026-02-06 11:34:16 WRN] Failed to determine the https port for redirect. {"EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HNJ5KNPNUJ73:00000001","RequestPath":"/api/v1/register","ConnectionId":"0HNJ5KNPNUJ73"}
[2026-02-06 11:34:16 INF] HTTP POST /api/v1/register responded 404 in 48.4243 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ5KNPNUJ73:00000001","ConnectionId":"0HNJ5KNPNUJ73"}
[2026-02-06 11:34:44 INF] HTTP POST /api/v1/register responded 404 in 2.8672 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ5KNPNUJ73:00000002","ConnectionId":"0HNJ5KNPNUJ73"}
[2026-02-06 11:35:39 INF] HTTP GET /api/v1/register responded 404 in 4.2166 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ5KNPNUJ73:00000003","ConnectionId":"0HNJ5KNPNUJ73"}
[2026-02-06 11:36:59 INF] HTTP GET /api/v1/register responded 404 in 0.1556 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ5KNPNUJ73:00000004","ConnectionId":"0HNJ5KNPNUJ73"}
[2026-02-06 18:11:02 INF] Checking database connection... {"SourceContext":"Program"}
[2026-02-06 18:11:05 INF] Database ready. Running seed data... {"SourceContext":"Program"}
[2026-02-06 18:11:07 INF] Database initialization completed successfully {"SourceContext":"Program"}
[2026-02-06 18:11:07 INF] AuthService API is running at http://localhost:5013. Health endpoint: http://localhost:5013/health {"SourceContext":"Program"}
[2026-02-06 18:20:40 WRN] Failed to determine the https port for redirect. {"EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HNJ5RQSKMHSF:00000001","RequestPath":"/api/v1/register","ConnectionId":"0HNJ5RQSKMHSF"}
[2026-02-06 18:20:40 INF] HTTP POST /api/v1/register responded 404 in 129.1742 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ5RQSKMHSF:00000001","ConnectionId":"0HNJ5RQSKMHSF"}
[2026-02-06 18:21:56 INF] HTTP POST /api/v1/register responded 404 in 2.4500 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ5RQSKMHSH:00000001","ConnectionId":"0HNJ5RQSKMHSH"}
[2026-02-06 18:24:34 INF] HTTP POST /api/v1/auth/register responded 400 in 445.0022 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ5RQSKMHSJ:00000001","ConnectionId":"0HNJ5RQSKMHSJ"}
[2026-02-06 18:25:48 INF] User Alann registered successfully. {"EventId":{"Id":1001,"Name":"LogUserRegistered"},"SourceContext":"AuthService2024010.Application.Services.AuthService","ActionId":"8ba17264-111f-480d-900c-9f508ccf5ac3","ActionName":"AuthService2024010.Api.Controllers.AuthController.Register (AuthService2024010.Api)","RequestId":"0HNJ5RQSKMHSL:00000001","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJ5RQSKMHSL"}
[2026-02-06 18:25:48 INF] HTTP POST /api/v1/auth/register responded 201 in 689.3915 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ5RQSKMHSL:00000001","ConnectionId":"0HNJ5RQSKMHSL"}
[2026-02-06 18:25:49 INF] Email sent successfully {"SourceContext":"AuthService2024010.Application.Services.EmailService","ActionId":"8ba17264-111f-480d-900c-9f508ccf5ac3","ActionName":"AuthService2024010.Api.Controllers.AuthController.Register (AuthService2024010.Api)","RequestId":"0HNJ5RQSKMHSL:00000001","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJ5RQSKMHSL"}
[2026-02-06 18:25:49 INF] Email pipeline completed {"SourceContext":"AuthService2024010.Application.Services.EmailService","ActionId":"8ba17264-111f-480d-900c-9f508ccf5ac3","ActionName":"AuthService2024010.Api.Controllers.AuthController.Register (AuthService2024010.Api)","RequestId":"0HNJ5RQSKMHSL:00000001","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJ5RQSKMHSL"}
[2026-02-06 18:25:49 INF] Email processed {"SourceContext":"AuthService2024010.Application.Services.EmailService","ActionId":"8ba17264-111f-480d-900c-9f508ccf5ac3","ActionName":"AuthService2024010.Api.Controllers.AuthController.Register (AuthService2024010.Api)","RequestId":"0HNJ5RQSKMHSL:00000001","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJ5RQSKMHSL"}
[2026-02-06 18:25:49 INF] Verification email sent {"SourceContext":"AuthService2024010.Application.Services.AuthService","ActionId":"8ba17264-111f-480d-900c-9f508ccf5ac3","ActionName":"AuthService2024010.Api.Controllers.AuthController.Register (AuthService2024010.Api)","RequestId":"0HNJ5RQSKMHSL:00000001","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJ5RQSKMHSL"}
[2026-02-06 18:35:35 WRN] Failed login attempt. {"EventId":{"Id":1003,"Name":"LogFailedLoginAttempt"},"SourceContext":"AuthService2024010.Application.Services.AuthService","ActionId":"ed00bab7-2eb4-49bf-91d7-0a86e5234043","ActionName":"AuthService2024010.Api.Controllers.AuthController.Login (AuthService2024010.Api)","RequestId":"0HNJ5RQSKMHSN:00000001","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNJ5RQSKMHSN"}
[2026-02-06 18:35:35 ERR] An unhandled exception occurred {"SourceContext":"AuthService2024010.Api.Middlewares.GlobalExceptionMiddleware","RequestId":"0HNJ5RQSKMHSN:00000001","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNJ5RQSKMHSN"}
System.UnauthorizedAccessException: User account is disabled
   at AuthService2024010.Application.Services.AuthService.LoginAsync(LoginDto loginDto) in C:\AuthService\src\AuthService2024010.Application\Services\AuthService.cs:line 184
   at AuthService2024010.Api.Controllers.AuthController.Login(LoginDto loginDto) in C:\AuthService\src\AuthService2024010.Api\Controllers\AuthController.cs:line 51
   at lambda_method532(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at AuthService2024010.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in C:\AuthService\src\AuthService2024010.Api\Middlewares\GlobalExceptionMiddleware.cs:line 18
[2026-02-06 18:35:35 INF] HTTP POST /api/v1/auth/login responded 401 in 438.8782 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ5RQSKMHSN:00000001","ConnectionId":"0HNJ5RQSKMHSN"}
[2026-02-06 18:38:33 ERR] Failed executing DbCommand (24ms) [Parameters=[@p3='?', @p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = Boolean), @p12='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?' (DbType = Boolean), @p7='?', @p8='?' (DbType = DateTime), @p9='?', @p10='?', @p11='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE user_emails SET email_verificaction_token = @p0, email_verification_token_expiry = @p1, email_verified = @p2
WHERE id = @p3;
UPDATE users SET created_at = @p4, name = @p5, status = @p6, surname = @p7, updated_at = @p8, username = @p9, email = @p10, password = @p11
WHERE id = @p12; {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"228e4a63-ed8f-4736-94b8-8029b983cfab","ActionName":"AuthService2024010.Api.Controllers.AuthController.VerifyEmail (AuthService2024010.Api)","RequestId":"0HNJ5RQSKMHSP:00000001","RequestPath":"/api/v1/auth/verify-email","ConnectionId":"0HNJ5RQSKMHSP"}
[2026-02-06 18:38:33 ERR] An exception occurred in the database while saving changes for context type 'AuthService2024010.Persistence.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23502: null value in column "email_verificaction_token" of relation "user_emails" violates not-null constraint

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23502
    MessageText: null value in column "email_verificaction_token" of relation "user_emails" violates not-null constraint
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: user_emails
    ColumnName: email_verificaction_token
    File: execMain.c
    Line: 2057
    Routine: ExecConstraints
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken) {"EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update","ActionId":"228e4a63-ed8f-4736-94b8-8029b983cfab","ActionName":"AuthService2024010.Api.Controllers.AuthController.VerifyEmail (AuthService2024010.Api)","RequestId":"0HNJ5RQSKMHSP:00000001","RequestPath":"/api/v1/auth/verify-email","ConnectionId":"0HNJ5RQSKMHSP"}
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23502: null value in column "email_verificaction_token" of relation "user_emails" violates not-null constraint

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23502
    MessageText: null value in column "email_verificaction_token" of relation "user_emails" violates not-null constraint
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: user_emails
    ColumnName: email_verificaction_token
    File: execMain.c
    Line: 2057
    Routine: ExecConstraints
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[2026-02-06 18:38:33 ERR] An unhandled exception occurred {"SourceContext":"AuthService2024010.Api.Middlewares.GlobalExceptionMiddleware","RequestId":"0HNJ5RQSKMHSP:00000001","RequestPath":"/api/v1/auth/verify-email","ConnectionId":"0HNJ5RQSKMHSP"}
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23502: null value in column "email_verificaction_token" of relation "user_emails" violates not-null constraint

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23502
    MessageText: null value in column "email_verificaction_token" of relation "user_emails" violates not-null constraint
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: user_emails
    ColumnName: email_verificaction_token
    File: execMain.c
    Line: 2057
    Routine: ExecConstraints
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at AuthService2024010.Persistence.Repositories.UserRepository.UpdateAsync(User user) in C:\AuthService\src\AuthService2024010.Persistence\Repositories\UserRepository.cs:line 88
   at AuthService2024010.Application.Services.AuthService.VerifyEmailAsync(VerifyEmailDto verifyEmailDto) in C:\AuthService\src\AuthService2024010.Application\Services\AuthService.cs:line 259
   at AuthService2024010.Api.Controllers.AuthController.VerifyEmail(VerifyEmailDto verifyEmailDto) in C:\AuthService\src\AuthService2024010.Api\Controllers\AuthController.cs:line 59
   at lambda_method633(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at AuthService2024010.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in C:\AuthService\src\AuthService2024010.Api\Middlewares\GlobalExceptionMiddleware.cs:line 18
[2026-02-06 18:38:33 ERR] HTTP POST /api/v1/auth/verify-email responded 500 in 821.5896 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ5RQSKMHSP:00000001","ConnectionId":"0HNJ5RQSKMHSP"}
[2026-02-06 18:40:16 ERR] Failed executing DbCommand (2ms) [Parameters=[@p3='?', @p0='?', @p1='?' (DbType = DateTime), @p2='?' (DbType = Boolean), @p12='?', @p4='?' (DbType = DateTime), @p5='?', @p6='?' (DbType = Boolean), @p7='?', @p8='?' (DbType = DateTime), @p9='?', @p10='?', @p11='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE user_emails SET email_verificaction_token = @p0, email_verification_token_expiry = @p1, email_verified = @p2
WHERE id = @p3;
UPDATE users SET created_at = @p4, name = @p5, status = @p6, surname = @p7, updated_at = @p8, username = @p9, email = @p10, password = @p11
WHERE id = @p12; {"EventId":{"Id":20102,"Name":"Microsoft.EntityFrameworkCore.Database.Command.CommandError"},"SourceContext":"Microsoft.EntityFrameworkCore.Database.Command","ActionId":"228e4a63-ed8f-4736-94b8-8029b983cfab","ActionName":"AuthService2024010.Api.Controllers.AuthController.VerifyEmail (AuthService2024010.Api)","RequestId":"0HNJ5RQSKMHSR:00000001","RequestPath":"/api/v1/auth/verify-email","ConnectionId":"0HNJ5RQSKMHSR"}
[2026-02-06 18:40:16 ERR] An exception occurred in the database while saving changes for context type 'AuthService2024010.Persistence.Data.ApplicationDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23502: null value in column "email_verificaction_token" of relation "user_emails" violates not-null constraint

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23502
    MessageText: null value in column "email_verificaction_token" of relation "user_emails" violates not-null constraint
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: user_emails
    ColumnName: email_verificaction_token
    File: execMain.c
    Line: 2057
    Routine: ExecConstraints
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken) {"EventId":{"Id":10000,"Name":"Microsoft.EntityFrameworkCore.Update.SaveChangesFailed"},"SourceContext":"Microsoft.EntityFrameworkCore.Update","ActionId":"228e4a63-ed8f-4736-94b8-8029b983cfab","ActionName":"AuthService2024010.Api.Controllers.AuthController.VerifyEmail (AuthService2024010.Api)","RequestId":"0HNJ5RQSKMHSR:00000001","RequestPath":"/api/v1/auth/verify-email","ConnectionId":"0HNJ5RQSKMHSR"}
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23502: null value in column "email_verificaction_token" of relation "user_emails" violates not-null constraint

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23502
    MessageText: null value in column "email_verificaction_token" of relation "user_emails" violates not-null constraint
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: user_emails
    ColumnName: email_verificaction_token
    File: execMain.c
    Line: 2057
    Routine: ExecConstraints
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
[2026-02-06 18:40:16 ERR] An unhandled exception occurred {"SourceContext":"AuthService2024010.Api.Middlewares.GlobalExceptionMiddleware","RequestId":"0HNJ5RQSKMHSR:00000001","RequestPath":"/api/v1/auth/verify-email","ConnectionId":"0HNJ5RQSKMHSR"}
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Npgsql.PostgresException (0x80004005): 23502: null value in column "email_verificaction_token" of relation "user_emails" violates not-null constraint

DETAIL: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
   at Npgsql.Internal.NpgsqlConnector.ReadMessageLong(Boolean async, DataRowLoadingMode dataRowLoadingMode, Boolean readingNotifications, Boolean isReadingPrependedMessage)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlDataReader.NextResult(Boolean async, Boolean isConsuming, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteReader(Boolean async, CommandBehavior behavior, CancellationToken cancellationToken)
   at Npgsql.NpgsqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
  Exception data:
    Severity: ERROR
    SqlState: 23502
    MessageText: null value in column "email_verificaction_token" of relation "user_emails" violates not-null constraint
    Detail: Detail redacted as it may contain sensitive data. Specify 'Include Error Detail' in the connection string to include this information.
    SchemaName: public
    TableName: user_emails
    ColumnName: email_verificaction_token
    File: execMain.c
    Line: 2057
    Routine: ExecConstraints
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalDatabase.SaveChangesAsync(IList`1 entries, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Npgsql.EntityFrameworkCore.PostgreSQL.Storage.Internal.NpgsqlExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at AuthService2024010.Persistence.Repositories.UserRepository.UpdateAsync(User user) in C:\AuthService\src\AuthService2024010.Persistence\Repositories\UserRepository.cs:line 88
   at AuthService2024010.Application.Services.AuthService.VerifyEmailAsync(VerifyEmailDto verifyEmailDto) in C:\AuthService\src\AuthService2024010.Application\Services\AuthService.cs:line 259
   at AuthService2024010.Api.Controllers.AuthController.VerifyEmail(VerifyEmailDto verifyEmailDto) in C:\AuthService\src\AuthService2024010.Api\Controllers\AuthController.cs:line 59
   at lambda_method633(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at AuthService2024010.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in C:\AuthService\src\AuthService2024010.Api\Middlewares\GlobalExceptionMiddleware.cs:line 18
[2026-02-06 18:40:16 ERR] HTTP POST /api/v1/auth/verify-email responded 500 in 228.5342 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ5RQSKMHSR:00000001","ConnectionId":"0HNJ5RQSKMHSR"}
[2026-02-06 18:47:40 INF] Checking database connection... {"SourceContext":"Program"}
[2026-02-06 18:47:54 INF] Database ready. Running seed data... {"SourceContext":"Program"}
[2026-02-06 18:47:55 INF] Database initialization completed successfully {"SourceContext":"Program"}
[2026-02-06 18:47:55 INF] AuthService API is running at http://localhost:5013. Health endpoint: http://localhost:5013/health {"SourceContext":"Program"}
[2026-02-06 18:49:35 INF] Checking database connection... {"SourceContext":"Program"}
[2026-02-06 18:49:37 INF] Database ready. Running seed data... {"SourceContext":"Program"}
[2026-02-06 18:49:38 INF] Database initialization completed successfully {"SourceContext":"Program"}
[2026-02-06 18:49:38 INF] AuthService API is running at http://localhost:5013. Health endpoint: http://localhost:5013/health {"SourceContext":"Program"}
[2026-02-06 18:49:57 WRN] Failed to determine the https port for redirect. {"EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HNJ5SB8GRSLN:00000001","RequestPath":"/api/v1/auth/verify-email","ConnectionId":"0HNJ5SB8GRSLN"}
[2026-02-06 18:50:00 INF] Email sent successfully {"SourceContext":"AuthService2024010.Application.Services.EmailService","ActionId":"31ab0538-6d21-4b49-850b-a2a394a276d8","ActionName":"AuthService2024010.Api.Controllers.AuthController.VerifyEmail (AuthService2024010.Api)","RequestId":"0HNJ5SB8GRSLN:00000001","RequestPath":"/api/v1/auth/verify-email","ConnectionId":"0HNJ5SB8GRSLN"}
[2026-02-06 18:50:01 INF] Email pipeline completed {"SourceContext":"AuthService2024010.Application.Services.EmailService","ActionId":"31ab0538-6d21-4b49-850b-a2a394a276d8","ActionName":"AuthService2024010.Api.Controllers.AuthController.VerifyEmail (AuthService2024010.Api)","RequestId":"0HNJ5SB8GRSLN:00000001","RequestPath":"/api/v1/auth/verify-email","ConnectionId":"0HNJ5SB8GRSLN"}
[2026-02-06 18:50:01 INF] Email processed {"SourceContext":"AuthService2024010.Application.Services.EmailService","ActionId":"31ab0538-6d21-4b49-850b-a2a394a276d8","ActionName":"AuthService2024010.Api.Controllers.AuthController.VerifyEmail (AuthService2024010.Api)","RequestId":"0HNJ5SB8GRSLN:00000001","RequestPath":"/api/v1/auth/verify-email","ConnectionId":"0HNJ5SB8GRSLN"}
[2026-02-06 18:50:01 INF] Email verified successfully for user Alann {"SourceContext":"AuthService2024010.Application.Services.AuthService","ActionId":"31ab0538-6d21-4b49-850b-a2a394a276d8","ActionName":"AuthService2024010.Api.Controllers.AuthController.VerifyEmail (AuthService2024010.Api)","RequestId":"0HNJ5SB8GRSLN:00000001","RequestPath":"/api/v1/auth/verify-email","ConnectionId":"0HNJ5SB8GRSLN"}
[2026-02-06 18:50:01 INF] HTTP POST /api/v1/auth/verify-email responded 200 in 3266.7654 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ5SB8GRSLN:00000001","ConnectionId":"0HNJ5SB8GRSLN"}
[2026-02-06 18:50:21 INF] User login succeeded. {"EventId":{"Id":1002,"Name":"LogUserLoggedIn"},"SourceContext":"AuthService2024010.Application.Services.AuthService","ActionId":"7ab07479-bb01-46ed-887a-30eb52d465e6","ActionName":"AuthService2024010.Api.Controllers.AuthController.Login (AuthService2024010.Api)","RequestId":"0HNJ5SB8GRSLN:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNJ5SB8GRSLN"}
[2026-02-06 18:50:21 INF] HTTP POST /api/v1/auth/login responded 200 in 996.7857 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ5SB8GRSLN:00000002","ConnectionId":"0HNJ5SB8GRSLN"}
[2026-02-06 19:03:53 INF] Checking database connection... {"SourceContext":"Program"}
[2026-02-06 19:03:55 INF] Database ready. Running seed data... {"SourceContext":"Program"}
[2026-02-06 19:03:56 INF] Database initialization completed successfully {"SourceContext":"Program"}
[2026-02-06 19:03:56 INF] AuthService API is running at http://localhost:5013. Health endpoint: http://localhost:5013/health {"SourceContext":"Program"}
[2026-02-06 19:04:26 WRN] Failed to determine the https port for redirect. {"EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HNJ5SJBFRB3F:00000001","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNJ5SJBFRB3F"}
[2026-02-06 19:04:29 INF] User login succeeded. {"EventId":{"Id":1002,"Name":"LogUserLoggedIn"},"SourceContext":"AuthService2024010.Application.Services.AuthService","ActionId":"d544d9c1-0235-46f2-b8ce-84617905b88c","ActionName":"AuthService2024010.Api.Controllers.AuthController.Login (AuthService2024010.Api)","RequestId":"0HNJ5SJBFRB3F:00000001","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNJ5SJBFRB3F"}
[2026-02-06 19:04:29 INF] HTTP POST /api/v1/auth/login responded 200 in 3159.1016 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ5SJBFRB3F:00000001","ConnectionId":"0HNJ5SJBFRB3F"}
[2026-02-06 19:05:16 INF] User login succeeded. {"EventId":{"Id":1002,"Name":"LogUserLoggedIn"},"SourceContext":"AuthService2024010.Application.Services.AuthService","ActionId":"d544d9c1-0235-46f2-b8ce-84617905b88c","ActionName":"AuthService2024010.Api.Controllers.AuthController.Login (AuthService2024010.Api)","RequestId":"0HNJ5SJBFRB3F:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNJ5SJBFRB3F"}
[2026-02-06 19:05:16 INF] HTTP POST /api/v1/auth/login responded 200 in 1577.1496 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ5SJBFRB3F:00000002","ConnectionId":"0HNJ5SJBFRB3F"}
[2026-02-06 19:06:46 WRN] Registration rejected: email already exists. {"EventId":{"Id":1004,"Name":"LogRegistrationWithExistingEmail"},"SourceContext":"AuthService2024010.Application.Services.AuthService","ActionId":"632196f7-efc2-41f6-9db7-1cf165250bb5","ActionName":"AuthService2024010.Api.Controllers.AuthController.Register (AuthService2024010.Api)","RequestId":"0HNJ5SJBFRB3H:00000001","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJ5SJBFRB3H"}
[2026-02-06 19:06:46 ERR] An unhandled exception occurred {"SourceContext":"AuthService2024010.Api.Middlewares.GlobalExceptionMiddleware","RequestId":"0HNJ5SJBFRB3H:00000001","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJ5SJBFRB3H"}
AuthService2024010.Application.Exceptions.BusinessException: Email already exists
   at AuthService2024010.Application.Services.AuthService.RegisterAsync(RegisterDto registerDto) in C:\AuthService\src\AuthService2024010.Application\Services\AuthService.cs:line 33
   at AuthService2024010.Api.Controllers.AuthController.Register(RegisterDto registerDto) in C:\AuthService\src\AuthService2024010.Api\Controllers\AuthController.cs:line 42
   at lambda_method342(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at AuthService2024010.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in C:\AuthService\src\AuthService2024010.Api\Middlewares\GlobalExceptionMiddleware.cs:line 18
[2026-02-06 19:06:47 INF] HTTP POST /api/v1/auth/register responded 400 in 189.7143 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ5SJBFRB3H:00000001","ConnectionId":"0HNJ5SJBFRB3H"}
[2026-02-06 19:06:56 WRN] Registration rejected: email already exists. {"EventId":{"Id":1004,"Name":"LogRegistrationWithExistingEmail"},"SourceContext":"AuthService2024010.Application.Services.AuthService","ActionId":"632196f7-efc2-41f6-9db7-1cf165250bb5","ActionName":"AuthService2024010.Api.Controllers.AuthController.Register (AuthService2024010.Api)","RequestId":"0HNJ5SJBFRB3H:00000002","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJ5SJBFRB3H"}
[2026-02-06 19:06:56 ERR] An unhandled exception occurred {"SourceContext":"AuthService2024010.Api.Middlewares.GlobalExceptionMiddleware","RequestId":"0HNJ5SJBFRB3H:00000002","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJ5SJBFRB3H"}
AuthService2024010.Application.Exceptions.BusinessException: Email already exists
   at AuthService2024010.Application.Services.AuthService.RegisterAsync(RegisterDto registerDto) in C:\AuthService\src\AuthService2024010.Application\Services\AuthService.cs:line 33
   at AuthService2024010.Api.Controllers.AuthController.Register(RegisterDto registerDto) in C:\AuthService\src\AuthService2024010.Api\Controllers\AuthController.cs:line 42
   at lambda_method342(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at AuthService2024010.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in C:\AuthService\src\AuthService2024010.Api\Middlewares\GlobalExceptionMiddleware.cs:line 18
[2026-02-06 19:06:56 INF] HTTP POST /api/v1/auth/register responded 400 in 75.9678 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ5SJBFRB3H:00000002","ConnectionId":"0HNJ5SJBFRB3H"}
[2026-02-06 19:07:39 WRN] Registration rejected: username already exists. {"EventId":{"Id":1005,"Name":"LogRegistrationWithExistingUsername"},"SourceContext":"AuthService2024010.Application.Services.AuthService","ActionId":"632196f7-efc2-41f6-9db7-1cf165250bb5","ActionName":"AuthService2024010.Api.Controllers.AuthController.Register (AuthService2024010.Api)","RequestId":"0HNJ5SJBFRB3H:00000003","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJ5SJBFRB3H"}
[2026-02-06 19:07:39 ERR] An unhandled exception occurred {"SourceContext":"AuthService2024010.Api.Middlewares.GlobalExceptionMiddleware","RequestId":"0HNJ5SJBFRB3H:00000003","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJ5SJBFRB3H"}
AuthService2024010.Application.Exceptions.BusinessException: Username already exists
   at AuthService2024010.Application.Services.AuthService.RegisterAsync(RegisterDto registerDto) in C:\AuthService\src\AuthService2024010.Application\Services\AuthService.cs:line 40
   at AuthService2024010.Api.Controllers.AuthController.Register(RegisterDto registerDto) in C:\AuthService\src\AuthService2024010.Api\Controllers\AuthController.cs:line 42
   at lambda_method342(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at AuthService2024010.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in C:\AuthService\src\AuthService2024010.Api\Middlewares\GlobalExceptionMiddleware.cs:line 18
[2026-02-06 19:07:39 INF] HTTP POST /api/v1/auth/register responded 400 in 92.2819 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ5SJBFRB3H:00000003","ConnectionId":"0HNJ5SJBFRB3H"}
[2026-02-06 19:07:51 INF] User AlannFlo registered successfully. {"EventId":{"Id":1001,"Name":"LogUserRegistered"},"SourceContext":"AuthService2024010.Application.Services.AuthService","ActionId":"632196f7-efc2-41f6-9db7-1cf165250bb5","ActionName":"AuthService2024010.Api.Controllers.AuthController.Register (AuthService2024010.Api)","RequestId":"0HNJ5SJBFRB3H:00000004","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJ5SJBFRB3H"}
[2026-02-06 19:07:51 INF] HTTP POST /api/v1/auth/register responded 201 in 521.0879 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ5SJBFRB3H:00000004","ConnectionId":"0HNJ5SJBFRB3H"}
[2026-02-06 19:07:53 INF] Email sent successfully {"SourceContext":"AuthService2024010.Application.Services.EmailService","ActionId":"632196f7-efc2-41f6-9db7-1cf165250bb5","ActionName":"AuthService2024010.Api.Controllers.AuthController.Register (AuthService2024010.Api)","RequestId":"0HNJ5SJBFRB3H:00000004","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJ5SJBFRB3H"}
[2026-02-06 19:07:53 INF] Email pipeline completed {"SourceContext":"AuthService2024010.Application.Services.EmailService","ActionId":"632196f7-efc2-41f6-9db7-1cf165250bb5","ActionName":"AuthService2024010.Api.Controllers.AuthController.Register (AuthService2024010.Api)","RequestId":"0HNJ5SJBFRB3H:00000004","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJ5SJBFRB3H"}
[2026-02-06 19:07:53 INF] Email processed {"SourceContext":"AuthService2024010.Application.Services.EmailService","ActionId":"632196f7-efc2-41f6-9db7-1cf165250bb5","ActionName":"AuthService2024010.Api.Controllers.AuthController.Register (AuthService2024010.Api)","RequestId":"0HNJ5SJBFRB3H:00000004","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJ5SJBFRB3H"}
[2026-02-06 19:07:53 INF] Verification email sent {"SourceContext":"AuthService2024010.Application.Services.AuthService","ActionId":"632196f7-efc2-41f6-9db7-1cf165250bb5","ActionName":"AuthService2024010.Api.Controllers.AuthController.Register (AuthService2024010.Api)","RequestId":"0HNJ5SJBFRB3H:00000004","RequestPath":"/api/v1/auth/register","ConnectionId":"0HNJ5SJBFRB3H"}
[2026-02-06 19:09:07 INF] Email sent successfully {"SourceContext":"AuthService2024010.Application.Services.EmailService","ActionId":"7a3e6833-0390-49a7-8b66-63896b3ce35e","ActionName":"AuthService2024010.Api.Controllers.AuthController.VerifyEmail (AuthService2024010.Api)","RequestId":"0HNJ5SJBFRB3J:00000001","RequestPath":"/api/v1/auth/verify-email","ConnectionId":"0HNJ5SJBFRB3J"}
[2026-02-06 19:09:07 INF] Email pipeline completed {"SourceContext":"AuthService2024010.Application.Services.EmailService","ActionId":"7a3e6833-0390-49a7-8b66-63896b3ce35e","ActionName":"AuthService2024010.Api.Controllers.AuthController.VerifyEmail (AuthService2024010.Api)","RequestId":"0HNJ5SJBFRB3J:00000001","RequestPath":"/api/v1/auth/verify-email","ConnectionId":"0HNJ5SJBFRB3J"}
[2026-02-06 19:09:07 INF] Email processed {"SourceContext":"AuthService2024010.Application.Services.EmailService","ActionId":"7a3e6833-0390-49a7-8b66-63896b3ce35e","ActionName":"AuthService2024010.Api.Controllers.AuthController.VerifyEmail (AuthService2024010.Api)","RequestId":"0HNJ5SJBFRB3J:00000001","RequestPath":"/api/v1/auth/verify-email","ConnectionId":"0HNJ5SJBFRB3J"}
[2026-02-06 19:09:07 INF] Email verified successfully for user AlannFlo {"SourceContext":"AuthService2024010.Application.Services.AuthService","ActionId":"7a3e6833-0390-49a7-8b66-63896b3ce35e","ActionName":"AuthService2024010.Api.Controllers.AuthController.VerifyEmail (AuthService2024010.Api)","RequestId":"0HNJ5SJBFRB3J:00000001","RequestPath":"/api/v1/auth/verify-email","ConnectionId":"0HNJ5SJBFRB3J"}
[2026-02-06 19:09:07 INF] HTTP POST /api/v1/auth/verify-email responded 200 in 1287.4406 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ5SJBFRB3J:00000001","ConnectionId":"0HNJ5SJBFRB3J"}
[2026-02-06 19:09:26 INF] User login succeeded. {"EventId":{"Id":1002,"Name":"LogUserLoggedIn"},"SourceContext":"AuthService2024010.Application.Services.AuthService","ActionId":"d544d9c1-0235-46f2-b8ce-84617905b88c","ActionName":"AuthService2024010.Api.Controllers.AuthController.Login (AuthService2024010.Api)","RequestId":"0HNJ5SJBFRB3J:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNJ5SJBFRB3J"}
[2026-02-06 19:09:26 INF] HTTP POST /api/v1/auth/login responded 200 in 442.0478 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ5SJBFRB3J:00000002","ConnectionId":"0HNJ5SJBFRB3J"}
[2026-02-06 19:11:33 INF] HTTP POST /api/v1/auth/resend-verification responded 400 in 15.9981 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ5SJBFRB3L:00000001","ConnectionId":"0HNJ5SJBFRB3L"}
[2026-02-06 19:13:39 INF] Email sent successfully {"SourceContext":"AuthService2024010.Application.Services.EmailService","ActionId":"b55a091c-c980-428a-9b4e-0e07b866df92","ActionName":"AuthService2024010.Api.Controllers.AuthController.ForgotPassword (AuthService2024010.Api)","RequestId":"0HNJ5SJBFRB3N:00000001","RequestPath":"/api/v1/auth/forgot-password","ConnectionId":"0HNJ5SJBFRB3N"}
[2026-02-06 19:13:39 INF] Email pipeline completed {"SourceContext":"AuthService2024010.Application.Services.EmailService","ActionId":"b55a091c-c980-428a-9b4e-0e07b866df92","ActionName":"AuthService2024010.Api.Controllers.AuthController.ForgotPassword (AuthService2024010.Api)","RequestId":"0HNJ5SJBFRB3N:00000001","RequestPath":"/api/v1/auth/forgot-password","ConnectionId":"0HNJ5SJBFRB3N"}
[2026-02-06 19:13:39 INF] Email processed {"SourceContext":"AuthService2024010.Application.Services.EmailService","ActionId":"b55a091c-c980-428a-9b4e-0e07b866df92","ActionName":"AuthService2024010.Api.Controllers.AuthController.ForgotPassword (AuthService2024010.Api)","RequestId":"0HNJ5SJBFRB3N:00000001","RequestPath":"/api/v1/auth/forgot-password","ConnectionId":"0HNJ5SJBFRB3N"}
[2026-02-06 19:13:39 INF] Password reset email sent to alan2007lf@gmail.com {"SourceContext":"AuthService2024010.Application.Services.AuthService","ActionId":"b55a091c-c980-428a-9b4e-0e07b866df92","ActionName":"AuthService2024010.Api.Controllers.AuthController.ForgotPassword (AuthService2024010.Api)","RequestId":"0HNJ5SJBFRB3N:00000001","RequestPath":"/api/v1/auth/forgot-password","ConnectionId":"0HNJ5SJBFRB3N"}
[2026-02-06 19:13:39 INF] HTTP POST /api/v1/auth/forgot-password responded 200 in 1134.2246 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ5SJBFRB3N:00000001","ConnectionId":"0HNJ5SJBFRB3N"}
[2026-02-06 19:15:55 INF] HTTP POST /api/v1/auth/reset-password responded 400 in 219.5620 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ5SJBFRB3P:00000001","ConnectionId":"0HNJ5SJBFRB3P"}
[2026-02-06 19:16:32 ERR] An unhandled exception occurred {"SourceContext":"AuthService2024010.Api.Middlewares.GlobalExceptionMiddleware","RequestId":"0HNJ5SJBFRB3P:00000002","RequestPath":"/api/v1/auth/reset-password","ConnectionId":"0HNJ5SJBFRB3P"}
System.InvalidOperationException: User not found or token expired.
   at AuthService2024010.Persistence.Repositories.UserRepository.GetByPasswordResetTokenAsync(String token) in C:\AuthService\src\AuthService2024010.Persistence\Repositories\UserRepository.cs:line 75
   at AuthService2024010.Application.Services.AuthService.ResetPasswordAsync(ResetPasswordDto resetPasswordDto) in C:\AuthService\src\AuthService2024010.Application\Services\AuthService.cs:line 393
   at AuthService2024010.Api.Controllers.AuthController.ResetPassword(ResetPasswordDto resetPasswordDto) in C:\AuthService\src\AuthService2024010.Api\Controllers\AuthController.cs:line 108
   at lambda_method737(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at AuthService2024010.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in C:\AuthService\src\AuthService2024010.Api\Middlewares\GlobalExceptionMiddleware.cs:line 18
[2026-02-06 19:16:32 INF] HTTP POST /api/v1/auth/reset-password responded 404 in 102.6156 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ5SJBFRB3P:00000002","ConnectionId":"0HNJ5SJBFRB3P"}
[2026-02-06 19:17:26 INF] Password reset successfully for user Alann {"SourceContext":"AuthService2024010.Application.Services.AuthService","ActionId":"30fb5118-0a52-4d5a-ae88-fc6d854ef8c0","ActionName":"AuthService2024010.Api.Controllers.AuthController.ResetPassword (AuthService2024010.Api)","RequestId":"0HNJ5SJBFRB3P:00000003","RequestPath":"/api/v1/auth/reset-password","ConnectionId":"0HNJ5SJBFRB3P"}
[2026-02-06 19:17:27 INF] HTTP POST /api/v1/auth/reset-password responded 200 in 1052.6084 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ5SJBFRB3P:00000003","ConnectionId":"0HNJ5SJBFRB3P"}
[2026-02-06 19:17:42 WRN] Failed login attempt. {"EventId":{"Id":1003,"Name":"LogFailedLoginAttempt"},"SourceContext":"AuthService2024010.Application.Services.AuthService","ActionId":"d544d9c1-0235-46f2-b8ce-84617905b88c","ActionName":"AuthService2024010.Api.Controllers.AuthController.Login (AuthService2024010.Api)","RequestId":"0HNJ5SJBFRB3P:00000004","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNJ5SJBFRB3P"}
[2026-02-06 19:17:42 ERR] An unhandled exception occurred {"SourceContext":"AuthService2024010.Api.Middlewares.GlobalExceptionMiddleware","RequestId":"0HNJ5SJBFRB3P:00000004","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNJ5SJBFRB3P"}
System.UnauthorizedAccessException: Invalid credentials
   at AuthService2024010.Application.Services.AuthService.LoginAsync(LoginDto loginDto) in C:\AuthService\src\AuthService2024010.Application\Services\AuthService.cs:line 191
   at AuthService2024010.Api.Controllers.AuthController.Login(LoginDto loginDto) in C:\AuthService\src\AuthService2024010.Api\Controllers\AuthController.cs:line 51
   at lambda_method22(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at AuthService2024010.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in C:\AuthService\src\AuthService2024010.Api\Middlewares\GlobalExceptionMiddleware.cs:line 18
[2026-02-06 19:17:42 INF] HTTP POST /api/v1/auth/login responded 401 in 421.6566 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ5SJBFRB3P:00000004","ConnectionId":"0HNJ5SJBFRB3P"}
[2026-02-06 19:29:25 INF] Checking database connection... {"SourceContext":"Program"}
[2026-02-06 19:29:28 INF] Database ready. Running seed data... {"SourceContext":"Program"}
[2026-02-06 19:29:28 INF] Database initialization completed successfully {"SourceContext":"Program"}
[2026-02-06 19:29:29 INF] AuthService API is running at http://localhost:5013. Health endpoint: http://localhost:5013/health {"SourceContext":"Program"}
[2026-02-06 19:29:35 WRN] Failed to determine the https port for redirect. {"EventId":{"Id":3,"Name":"FailedToDeterminePort"},"SourceContext":"Microsoft.AspNetCore.HttpsPolicy.HttpsRedirectionMiddleware","RequestId":"0HNJ5T1CVBE7G:00000001","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNJ5T1CVBE7G"}
[2026-02-06 19:29:38 WRN] Failed login attempt. {"EventId":{"Id":1003,"Name":"LogFailedLoginAttempt"},"SourceContext":"AuthService2024010.Application.Services.AuthService","ActionId":"49610d41-58b1-4306-97ab-4ba004ff1717","ActionName":"AuthService2024010.Api.Controllers.AuthController.Login (AuthService2024010.Api)","RequestId":"0HNJ5T1CVBE7G:00000001","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNJ5T1CVBE7G"}
[2026-02-06 19:29:38 ERR] An unhandled exception occurred {"SourceContext":"AuthService2024010.Api.Middlewares.GlobalExceptionMiddleware","RequestId":"0HNJ5T1CVBE7G:00000001","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNJ5T1CVBE7G"}
System.UnauthorizedAccessException: Invalid credentials
   at AuthService2024010.Application.Services.AuthService.LoginAsync(LoginDto loginDto) in C:\AuthService\src\AuthService2024010.Application\Services\AuthService.cs:line 191
   at AuthService2024010.Api.Controllers.AuthController.Login(LoginDto loginDto) in C:\AuthService\src\AuthService2024010.Api\Controllers\AuthController.cs:line 51
   at lambda_method22(Closure, Object)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.AwaitableObjectResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.RateLimiting.RateLimitingMiddleware.InvokeInternal(HttpContext context, EnableRateLimitingAttribute enableRateLimitingAttribute)
   at AuthService2024010.Api.Middlewares.GlobalExceptionMiddleware.InvokeAsync(HttpContext context) in C:\AuthService\src\AuthService2024010.Api\Middlewares\GlobalExceptionMiddleware.cs:line 18
[2026-02-06 19:29:39 INF] HTTP POST /api/v1/auth/login responded 401 in 4425.6223 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ5T1CVBE7G:00000001","ConnectionId":"0HNJ5T1CVBE7G"}
[2026-02-06 19:29:44 INF] User login succeeded. {"EventId":{"Id":1002,"Name":"LogUserLoggedIn"},"SourceContext":"AuthService2024010.Application.Services.AuthService","ActionId":"49610d41-58b1-4306-97ab-4ba004ff1717","ActionName":"AuthService2024010.Api.Controllers.AuthController.Login (AuthService2024010.Api)","RequestId":"0HNJ5T1CVBE7G:00000002","RequestPath":"/api/v1/auth/login","ConnectionId":"0HNJ5T1CVBE7G"}
[2026-02-06 19:29:44 INF] HTTP POST /api/v1/auth/login responded 200 in 2482.5120 ms {"SourceContext":"Serilog.AspNetCore.RequestLoggingMiddleware","RequestId":"0HNJ5T1CVBE7G:00000002","ConnectionId":"0HNJ5T1CVBE7G"}
